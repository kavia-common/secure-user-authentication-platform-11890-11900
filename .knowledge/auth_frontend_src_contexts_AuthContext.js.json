{"is_source_file": true, "format": "JavaScript", "description": "This file defines an authentication context for a React application, managing user authentication state, session handling, and integration with backend APIs (including Supabase). It includes functions for signup, login, logout, 2FA handling, password reset, and profile refresh, utilizing React hooks and context for state management.", "external_files": ["../lib/supabase", "../lib/api"], "external_methods": ["supabase.auth.getSession", "supabase.auth.signOut", "supabase.auth.onAuthStateChange", "api.auth.signup", "api.auth.login", "api.auth.logout", "api.twoFactor.sendOtp", "api.twoFactor.verifyOtp", "api.twoFactor.status", "api.user.getProfile", "api.auth.forgotPassword", "api.auth.resetPassword", "api.normalizeError"], "published": ["AuthProvider", "useAuth"], "classes": [], "methods": [{"name": "AuthProvider", "description": "React component providing authentication context to its children, managing auth state and side effects."}, {"name": "useAuth", "description": "Custom React hook for consuming the authentication context."}], "calls": ["React.createContext", "React.useReducer", "React.useCallback", "React.useEffect", "React.useContext", "supabase.auth.getSession", "supabase.auth.onAuthStateChange", "supabase.auth.signOut", "api.auth.signup", "api.auth.login", "api.auth.logout", "api.twoFactor.sendOtp", "api.twoFactor.verifyOtp", "api.twoFactor.status", "api.user.getProfile", "api.normalizeError"], "search-terms": ["AuthContext", "AuthProvider", "useAuth", "tokenStorage", "twoFactor", "session timeout", "signIn", "signOut", "password reset", "2FA verification", "React Context", "React hooks"], "state": 2, "file_id": 18, "knowledge_revision": 92, "git_revision": "1a72f2e06b058122c808aff4e43fa01ba0db2d13", "revision_history": [{"37": ""}, {"74": ""}, {"83": "e3888bed91c5623c4757687d8d6f9c30fd90f31c"}, {"84": "e3888bed91c5623c4757687d8d6f9c30fd90f31c"}, {"85": "e3888bed91c5623c4757687d8d6f9c30fd90f31c"}, {"86": "e3888bed91c5623c4757687d8d6f9c30fd90f31c"}, {"87": "e3888bed91c5623c4757687d8d6f9c30fd90f31c"}, {"88": "e3888bed91c5623c4757687d8d6f9c30fd90f31c"}, {"89": "e3888bed91c5623c4757687d8d6f9c30fd90f31c"}, {"90": "e3888bed91c5623c4757687d8d6f9c30fd90f31c"}, {"91": "e3888bed91c5623c4757687d8d6f9c30fd90f31c"}, {"92": "1a72f2e06b058122c808aff4e43fa01ba0db2d13"}], "ctags": [{"_type": "tag", "name": "AuthContext", "path": "/home/kavia/workspace/code-generation/secure-user-authentication-platform-11890-11900/auth_frontend/src/contexts/AuthContext.js", "pattern": "/^const AuthContext = createContext(null)$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "AuthProvider", "path": "/home/kavia/workspace/code-generation/secure-user-authentication-platform-11890-11900/auth_frontend/src/contexts/AuthContext.js", "pattern": "/^export const AuthProvider = ({ children }) => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "activityEvents", "path": "/home/kavia/workspace/code-generation/secure-user-authentication-platform-11890-11900/auth_frontend/src/contexts/AuthContext.js", "pattern": "/^  const activityEvents = ['mousedown', 'mousemove', 'keypress', 'scroll', 'touchstart']$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "authReducer", "path": "/home/kavia/workspace/code-generation/secure-user-authentication-platform-11890-11900/auth_frontend/src/contexts/AuthContext.js", "pattern": "/^const authReducer = (state, action) => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "children", "path": "/home/kavia/workspace/code-generation/secure-user-authentication-platform-11890-11900/auth_frontend/src/contexts/AuthContext.js", "pattern": "/^export const AuthProvider = ({ children }) => {$/", "language": "JavaScript", "kind": "field", "scope": "AuthProvider", "scopeKind": "class"}, {"_type": "tag", "name": "clearError", "path": "/home/kavia/workspace/code-generation/secure-user-authentication-platform-11890-11900/auth_frontend/src/contexts/AuthContext.js", "pattern": "/^  const clearError = () => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "context", "path": "/home/kavia/workspace/code-generation/secure-user-authentication-platform-11890-11900/auth_frontend/src/contexts/AuthContext.js", "pattern": "/^  const context = useContext(AuthContext)$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "dispatch", "path": "/home/kavia/workspace/code-generation/secure-user-authentication-platform-11890-11900/auth_frontend/src/contexts/AuthContext.js", "pattern": "/^  const [state, dispatch] = useReducer(authReducer, initialState)$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "error", "path": "/home/kavia/workspace/code-generation/secure-user-authentication-platform-11890-11900/auth_frontend/src/contexts/AuthContext.js", "pattern": "/^  error: null,$/", "language": "JavaScript", "kind": "property", "scope": "initialState", "scopeKind": "class"}, {"_type": "tag", "name": "forgotPassword", "path": "/home/kavia/workspace/code-generation/secure-user-authentication-platform-11890-11900/auth_frontend/src/contexts/AuthContext.js", "pattern": "/^  const forgotPassword = async (email) => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "handleError", "path": "/home/kavia/workspace/code-generation/secure-user-authentication-platform-11890-11900/auth_frontend/src/contexts/AuthContext.js", "pattern": "/^  const handleError = useCallback((err, fallback = 'Something went wrong') => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "initialState", "path": "/home/kavia/workspace/code-generation/secure-user-authentication-platform-11890-11900/auth_frontend/src/contexts/AuthContext.js", "pattern": "/^const initialState = {$/", "language": "JavaScript", "kind": "class"}, {"_type": "tag", "name": "loading", "path": "/home/kavia/workspace/code-generation/secure-user-authentication-platform-11890-11900/auth_frontend/src/contexts/AuthContext.js", "pattern": "/^  loading: true,$/", "language": "JavaScript", "kind": "property", "scope": "initialState", "scopeKind": "class"}, {"_type": "tag", "name": "login", "path": "/home/kavia/workspace/code-generation/secure-user-authentication-platform-11890-11900/auth_frontend/src/contexts/AuthContext.js", "pattern": "/^  const login = async (credentials) => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "logout", "path": "/home/kavia/workspace/code-generation/secure-user-authentication-platform-11890-11900/auth_frontend/src/contexts/AuthContext.js", "pattern": "/^  const logout = useCallback(async () => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "normalized", "path": "/home/kavia/workspace/code-generation/secure-user-authentication-platform-11890-11900/auth_frontend/src/contexts/AuthContext.js", "pattern": "/^      const normalized = handleError(error, 'Failed to create account')$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "normalized", "path": "/home/kavia/workspace/code-generation/secure-user-authentication-platform-11890-11900/auth_frontend/src/contexts/AuthContext.js", "pattern": "/^      const normalized = handleError(error, 'Failed to refresh profile')$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "normalized", "path": "/home/kavia/workspace/code-generation/secure-user-authentication-platform-11890-11900/auth_frontend/src/contexts/AuthContext.js", "pattern": "/^      const normalized = handleError(error, 'Failed to reset password')$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "normalized", "path": "/home/kavia/workspace/code-generation/secure-user-authentication-platform-11890-11900/auth_frontend/src/contexts/AuthContext.js", "pattern": "/^      const normalized = handleError(error, 'Failed to send password reset instructions')$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "normalized", "path": "/home/kavia/workspace/code-generation/secure-user-authentication-platform-11890-11900/auth_frontend/src/contexts/AuthContext.js", "pattern": "/^      const normalized = handleError(error, 'Failed to send verification code')$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "normalized", "path": "/home/kavia/workspace/code-generation/secure-user-authentication-platform-11890-11900/auth_frontend/src/contexts/AuthContext.js", "pattern": "/^      const normalized = handleError(error, 'Login failed')$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "normalized", "path": "/home/kavia/workspace/code-generation/secure-user-authentication-platform-11890-11900/auth_frontend/src/contexts/AuthContext.js", "pattern": "/^      const normalized = handleError(error, 'Verification failed')$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "refreshProfile", "path": "/home/kavia/workspace/code-generation/secure-user-authentication-platform-11890-11900/auth_frontend/src/contexts/AuthContext.js", "pattern": "/^  const refreshProfile = async () => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "resetPassword", "path": "/home/kavia/workspace/code-generation/secure-user-authentication-platform-11890-11900/auth_frontend/src/contexts/AuthContext.js", "pattern": "/^  const resetPassword = async (token, newPassword) => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "result", "path": "/home/kavia/workspace/code-generation/secure-user-authentication-platform-11890-11900/auth_frontend/src/contexts/AuthContext.js", "pattern": "/^      const result = await api.auth.login(credentials)$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "result", "path": "/home/kavia/workspace/code-generation/secure-user-authentication-platform-11890-11900/auth_frontend/src/contexts/AuthContext.js", "pattern": "/^      const result = await api.auth.signup(userData)$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "result", "path": "/home/kavia/workspace/code-generation/secure-user-authentication-platform-11890-11900/auth_frontend/src/contexts/AuthContext.js", "pattern": "/^      const result = await api.twoFactor.verifyOtp(email, otpCode)$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "sendTwoFactorOtp", "path": "/home/kavia/workspace/code-generation/secure-user-authentication-platform-11890-11900/auth_frontend/src/contexts/AuthContext.js", "pattern": "/^  const sendTwoFactorOtp = async (email) => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "session", "path": "/home/kavia/workspace/code-generation/secure-user-authentication-platform-11890-11900/auth_frontend/src/contexts/AuthContext.js", "pattern": "/^  session: null,$/", "language": "JavaScript", "kind": "property", "scope": "initialState", "scopeKind": "class"}, {"_type": "tag", "name": "tokenStorage", "path": "/home/kavia/workspace/code-generation/secure-user-authentication-platform-11890-11900/auth_frontend/src/contexts/AuthContext.js", "pattern": "/^const tokenStorage = {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "twoFactorRequired", "path": "/home/kavia/workspace/code-generation/secure-user-authentication-platform-11890-11900/auth_frontend/src/contexts/AuthContext.js", "pattern": "/^  twoFactorRequired: false,$/", "language": "JavaScript", "kind": "property", "scope": "initialState", "scopeKind": "class"}, {"_type": "tag", "name": "user", "path": "/home/kavia/workspace/code-generation/secure-user-authentication-platform-11890-11900/auth_frontend/src/contexts/AuthContext.js", "pattern": "/^  user: null,$/", "language": "JavaScript", "kind": "property", "scope": "initialState", "scopeKind": "class"}, {"_type": "tag", "name": "userData", "path": "/home/kavia/workspace/code-generation/secure-user-authentication-platform-11890-11900/auth_frontend/src/contexts/AuthContext.js", "pattern": "/^          const userData = await api.user.getProfile()$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "userData", "path": "/home/kavia/workspace/code-generation/secure-user-authentication-platform-11890-11900/auth_frontend/src/contexts/AuthContext.js", "pattern": "/^      const userData = await api.user.getProfile()$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "value", "path": "/home/kavia/workspace/code-generation/secure-user-authentication-platform-11890-11900/auth_frontend/src/contexts/AuthContext.js", "pattern": "/^  const value = {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "value", "path": "/home/kavia/workspace/code-generation/secure-user-authentication-platform-11890-11900/auth_frontend/src/contexts/AuthContext.js", "pattern": "/^  return <AuthContext.Provider value={value}>{children}<\\/AuthContext.Provider>$/", "language": "JavaScript", "kind": "field", "scope": "Provider", "scopeKind": "class"}, {"_type": "tag", "name": "verifyTwoFactorOtp", "path": "/home/kavia/workspace/code-generation/secure-user-authentication-platform-11890-11900/auth_frontend/src/contexts/AuthContext.js", "pattern": "/^  const verifyTwoFactorOtp = async (email, otpCode) => {$/", "language": "JavaScript", "kind": "constant"}], "hash": "82b054a53bae7ee45da0ededa66fbcb6", "format-version": 4, "code-base-name": "auth_frontend", "filename": "auth_frontend/src/contexts/AuthContext.js", "fields": [{"name": "export const AuthProvider = ({ children }) => {", "scope": "AuthProvider", "scopeKind": "class", "description": "unavailable"}, {"name": "error: null,", "scope": "initialState", "scopeKind": "class", "description": "unavailable"}, {"name": "loading: true,", "scope": "initialState", "scopeKind": "class", "description": "unavailable"}, {"name": "session: null,", "scope": "initialState", "scopeKind": "class", "description": "unavailable"}, {"name": "twoFactorRequired: false,", "scope": "initialState", "scopeKind": "class", "description": "unavailable"}, {"name": "user: null,", "scope": "initialState", "scopeKind": "class", "description": "unavailable"}, {"name": "return <AuthContext.Provider value={value}>{children}<\\/AuthContext.Provider>", "scope": "Provider", "scopeKind": "class", "description": "unavailable"}]}